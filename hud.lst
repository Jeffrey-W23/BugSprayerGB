                                      1 ;--------------------------------------------------------
                                      2 ; File Created by SDCC : free open source ISO C Compiler
                                      3 ; Version 4.5.1 #15267 (MINGW64)
                                      4 ;--------------------------------------------------------
                                      5 	.module hud
                                      6 	
                                      7 ;--------------------------------------------------------
                                      8 ; Public variables in this module
                                      9 ;--------------------------------------------------------
                                     10 	.globl _set_bkg_tiles
                                     11 	.globl _InitHud
                                     12 	.globl _SetHealth
                                     13 	.globl _SetScore
                                     14 ;--------------------------------------------------------
                                     15 ; special function registers
                                     16 ;--------------------------------------------------------
                                     17 ;--------------------------------------------------------
                                     18 ; ram data
                                     19 ;--------------------------------------------------------
                                     20 	.area _DATA
                                     21 ;--------------------------------------------------------
                                     22 ; ram data
                                     23 ;--------------------------------------------------------
                                     24 	.area _INITIALIZED
    00000000                         25 _m_nCurrentHealth:
    00000000                         26 	.ds 2
                                     27 ;--------------------------------------------------------
                                     28 ; absolute external ram data
                                     29 ;--------------------------------------------------------
                                     30 	.area _DABS (ABS)
                                     31 ;--------------------------------------------------------
                                     32 ; global & static initialisations
                                     33 ;--------------------------------------------------------
                                     34 	.area _HOME
                                     35 	.area _GSINIT
                                     36 	.area _GSFINAL
                                     37 	.area _GSINIT
                                     38 ;--------------------------------------------------------
                                     39 ; Home
                                     40 ;--------------------------------------------------------
                                     41 	.area _HOME
                                     42 	.area _HOME
                                     43 ;--------------------------------------------------------
                                     44 ; code
                                     45 ;--------------------------------------------------------
                                     46 	.area _CODE
                                     47 ;hud.c:31: void InitHud(void) 
                                     48 ;	---------------------------------
                                     49 ; Function InitHud
                                     50 ; ---------------------------------
    00000000                         51 _InitHud::
                                     52 ;hud.c:34: m_nCurrentHealth = 999;
    00000000 21r00r00         [12]   53 	ld	hl, #_m_nCurrentHealth
    00000003 3E E7            [ 8]   54 	ld	a, #0xe7
    00000005 22               [ 8]   55 	ld	(hl+), a
                                     56 ;hud.c:35: SetHealth(999);
    00000006 11 E7 03         [12]   57 	ld	de, #0x03e7
    00000009 72               [ 8]   58 	ld	(hl), d
    0000000A CDr13r00         [24]   59 	call	_SetHealth
                                     60 ;hud.c:36: SetScore(0);
    0000000D 11 00 00         [12]   61 	ld	de, #0x0000
                                     62 ;hud.c:37: }
    00000010 C3r58r00         [16]   63 	jp	_SetScore
                                     64 ;hud.c:45: void SetHealth(UINT16 nHealth) 
                                     65 ;	---------------------------------
                                     66 ; Function SetHealth
                                     67 ; ---------------------------------
    00000013                         68 _SetHealth::
    00000013 E8 FA            [16]   69 	add	sp, #-6
                                     70 ;hud.c:48: UINT8 tens = (nHealth / 10) % 10;
    00000015 D5               [16]   71 	push	de
    00000016 01 0A 00         [12]   72 	ld	bc, #0x000a
    00000019 CDr00r00         [24]   73 	call	__divuint
    0000001C 69               [ 4]   74 	ld	l, c
    0000001D 60               [ 4]   75 	ld	h, b
    0000001E 01 0A 00         [12]   76 	ld	bc, #0x000a
    00000021 5D               [ 4]   77 	ld	e, l
    00000022 54               [ 4]   78 	ld	d, h
    00000023 CDr00r00         [24]   79 	call	__moduint
    00000026 D1               [12]   80 	pop	de
    00000027 F8 05            [12]   81 	ldhl	sp,	#5
    00000029 71               [ 8]   82 	ld	(hl), c
                                     83 ;hud.c:49: UINT8 ones = nHealth % 10;
    0000002A 01 0A 00         [12]   84 	ld	bc, #0x000a
    0000002D CDr00r00         [24]   85 	call	__moduint
                                     86 ;hud.c:55: tiles[0] = TILE_H;
    00000030 F8 00            [12]   87 	ldhl	sp,	#0
                                     88 ;hud.c:56: tiles[1] = TILE_P;
    00000032 3E 54            [ 8]   89 	ld	a, #0x54
    00000034 22               [ 8]   90 	ld	(hl+), a
                                     91 ;hud.c:57: tiles[2] = TILE_COLON;
    00000035 3E 55            [ 8]   92 	ld	a, #0x55
    00000037 22               [ 8]   93 	ld	(hl+), a
    00000038 36 56            [12]   94 	ld	(hl), #0x56
                                     95 ;hud.c:58: tiles[3] = TILE_0 + tens;
    0000003A F8 05            [12]   96 	ldhl	sp,	#5
    0000003C 3A               [ 8]   97 	ld	a, (hl-)
    0000003D 2B               [ 8]   98 	dec	hl
    0000003E C6 4A            [ 8]   99 	add	a, #0x4a
                                    100 ;hud.c:59: tiles[4] = TILE_0 + ones;
    00000040 22               [ 8]  101 	ld	(hl+), a
    00000041 79               [ 4]  102 	ld	a, c
    00000042 C6 4A            [ 8]  103 	add	a, #0x4a
    00000044 77               [ 8]  104 	ld	(hl), a
                                    105 ;hud.c:62: set_bkg_tiles(1, 17, 5, 1, tiles);
    00000045 21 00 00         [12]  106 	ld	hl, #0
    00000048 39               [ 8]  107 	add	hl, sp
    00000049 E5               [16]  108 	push	hl
    0000004A 21 05 01         [12]  109 	ld	hl, #0x105
    0000004D E5               [16]  110 	push	hl
    0000004E 21 01 11         [12]  111 	ld	hl, #0x1101
    00000051 E5               [16]  112 	push	hl
    00000052 CDr00r00         [24]  113 	call	_set_bkg_tiles
                                    114 ;hud.c:63: }
    00000055 E8 0C            [16]  115 	add	sp, #12
    00000057 C9               [16]  116 	ret
                                    117 ;hud.c:71: void SetScore(UINT16 nScore) 
                                    118 ;	---------------------------------
                                    119 ; Function SetScore
                                    120 ; ---------------------------------
    00000058                        121 _SetScore::
    00000058 E8 F1            [16]  122 	add	sp, #-15
    0000005A F8 0D            [12]  123 	ldhl	sp,	#13
    0000005C 7B               [ 4]  124 	ld	a, e
    0000005D 22               [ 8]  125 	ld	(hl+), a
                                    126 ;hud.c:74: UINT8 thousands = (nScore / 1000) % 10;
    0000005E 7A               [ 4]  127 	ld	a, d
    0000005F 32               [ 8]  128 	ld	(hl-), a
    00000060 01 E8 03         [12]  129 	ld	bc, #0x03e8
    00000063 2A               [ 8]  130 	ld	a, (hl+)
    00000064 5F               [ 4]  131 	ld	e, a
    00000065 56               [ 8]  132 	ld	d, (hl)
    00000066 CDr00r00         [24]  133 	call	__divuint
    00000069 79               [ 4]  134 	ld	a, c
    0000006A 1E 0A            [ 8]  135 	ld	e, #0x0a
    0000006C CDr00r00         [24]  136 	call	__moduchar
    0000006F F8 0A            [12]  137 	ldhl	sp,	#10
    00000071 71               [ 8]  138 	ld	(hl), c
                                    139 ;hud.c:75: UINT8 hundreds = (nScore / 100) % 10;
    00000072 01 64 00         [12]  140 	ld	bc, #0x0064
    00000075 F8 0D            [12]  141 	ldhl	sp,	#13
    00000077 2A               [ 8]  142 	ld	a, (hl+)
    00000078 5F               [ 4]  143 	ld	e, a
    00000079 56               [ 8]  144 	ld	d, (hl)
    0000007A CDr00r00         [24]  145 	call	__divuint
    0000007D 59               [ 4]  146 	ld	e, c
    0000007E 50               [ 4]  147 	ld	d, b
    0000007F 01 0A 00         [12]  148 	ld	bc, #0x000a
    00000082 CDr00r00         [24]  149 	call	__moduint
    00000085 F8 0B            [12]  150 	ldhl	sp,	#11
                                    151 ;hud.c:76: UINT8 tens = (nScore / 10) % 10;
    00000087 79               [ 4]  152 	ld	a, c
    00000088 22               [ 8]  153 	ld	(hl+), a
    00000089 23               [ 8]  154 	inc	hl
    0000008A 01 0A 00         [12]  155 	ld	bc, #0x000a
    0000008D 2A               [ 8]  156 	ld	a, (hl+)
    0000008E 5F               [ 4]  157 	ld	e, a
    0000008F 56               [ 8]  158 	ld	d, (hl)
    00000090 CDr00r00         [24]  159 	call	__divuint
    00000093 59               [ 4]  160 	ld	e, c
    00000094 50               [ 4]  161 	ld	d, b
    00000095 01 0A 00         [12]  162 	ld	bc, #0x000a
    00000098 CDr00r00         [24]  163 	call	__moduint
    0000009B F8 0C            [12]  164 	ldhl	sp,	#12
                                    165 ;hud.c:77: UINT8 ones = nScore % 10;
    0000009D 79               [ 4]  166 	ld	a, c
    0000009E 22               [ 8]  167 	ld	(hl+), a
    0000009F 01 0A 00         [12]  168 	ld	bc, #0x000a
    000000A2 2A               [ 8]  169 	ld	a, (hl+)
    000000A3 5F               [ 4]  170 	ld	e, a
    000000A4 56               [ 8]  171 	ld	d, (hl)
    000000A5 CDr00r00         [24]  172 	call	__moduint
                                    173 ;hud.c:81: tiles[0] = TILE_S;
    000000A8 F8 00            [12]  174 	ldhl	sp,	#0
                                    175 ;hud.c:82: tiles[1] = TILE_C;
    000000AA 3E 57            [ 8]  176 	ld	a, #0x57
    000000AC 22               [ 8]  177 	ld	(hl+), a
                                    178 ;hud.c:83: tiles[2] = TILE_O;
    000000AD 3E 58            [ 8]  179 	ld	a, #0x58
    000000AF 22               [ 8]  180 	ld	(hl+), a
                                    181 ;hud.c:84: tiles[3] = TILE_R;
    000000B0 3E 59            [ 8]  182 	ld	a, #0x59
    000000B2 22               [ 8]  183 	ld	(hl+), a
                                    184 ;hud.c:85: tiles[4] = TILE_E;
    000000B3 3E 5A            [ 8]  185 	ld	a, #0x5a
    000000B5 22               [ 8]  186 	ld	(hl+), a
                                    187 ;hud.c:86: tiles[5] = TILE_COLON;
    000000B6 3E 5B            [ 8]  188 	ld	a, #0x5b
    000000B8 22               [ 8]  189 	ld	(hl+), a
    000000B9 36 56            [12]  190 	ld	(hl), #0x56
                                    191 ;hud.c:87: tiles[6] = TILE_0 + thousands;
    000000BB F8 0A            [12]  192 	ldhl	sp,	#10
    000000BD 7E               [ 8]  193 	ld	a, (hl)
    000000BE C6 4A            [ 8]  194 	add	a, #0x4a
    000000C0 F8 06            [12]  195 	ldhl	sp,	#6
    000000C2 77               [ 8]  196 	ld	(hl), a
                                    197 ;hud.c:88: tiles[7] = TILE_0 + hundreds;
    000000C3 F8 0B            [12]  198 	ldhl	sp,	#11
    000000C5 7E               [ 8]  199 	ld	a, (hl)
    000000C6 C6 4A            [ 8]  200 	add	a, #0x4a
    000000C8 F8 07            [12]  201 	ldhl	sp,	#7
    000000CA 77               [ 8]  202 	ld	(hl), a
                                    203 ;hud.c:89: tiles[8] = TILE_0 + tens;
    000000CB F8 0C            [12]  204 	ldhl	sp,	#12
    000000CD 7E               [ 8]  205 	ld	a, (hl)
    000000CE C6 4A            [ 8]  206 	add	a, #0x4a
    000000D0 F8 08            [12]  207 	ldhl	sp,	#8
                                    208 ;hud.c:90: tiles[9] = TILE_0 + ones;
    000000D2 22               [ 8]  209 	ld	(hl+), a
    000000D3 79               [ 4]  210 	ld	a, c
    000000D4 C6 4A            [ 8]  211 	add	a, #0x4a
    000000D6 77               [ 8]  212 	ld	(hl), a
                                    213 ;hud.c:93: set_bkg_tiles(9, 17, 10, 1, tiles);
    000000D7 21 00 00         [12]  214 	ld	hl, #0
    000000DA 39               [ 8]  215 	add	hl, sp
    000000DB E5               [16]  216 	push	hl
    000000DC 21 0A 01         [12]  217 	ld	hl, #0x10a
    000000DF E5               [16]  218 	push	hl
    000000E0 21 09 11         [12]  219 	ld	hl, #0x1109
    000000E3 E5               [16]  220 	push	hl
    000000E4 CDr00r00         [24]  221 	call	_set_bkg_tiles
                                    222 ;hud.c:94: }
    000000E7 E8 15            [16]  223 	add	sp, #21
    000000E9 C9               [16]  224 	ret
                                    225 	.area _CODE
                                    226 	.area _INITIALIZER
    00000000                        227 __xinit__m_nCurrentHealth:
    00000000 E7 03                  228 	.dw #0x03e7
                                    229 	.area _CABS (ABS)
